<!doctype html><html lang=ru><head><meta charset=utf-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1" name=viewport><title>Запускаем свой git сервер</title><meta content="Кодерный понедельник" name=description><meta content=https://freecx.github.io/touch-icon.png property=og:image><link href=https://code.cdn.mozilla.net/fonts/fira.css rel=stylesheet><link href=https://freecx.github.io/favicon.png rel=icon><link href=https://freecx.github.io/touch-icon.png rel=apple-touch-icon><link href=https://freecx.github.io/main.css rel=stylesheet><link href=https://freecx.github.io/syntax.css rel=stylesheet><body><aside class=logo><a href=https://github.com/FreeCX> <img class=gravatar src=https://freecx.github.io/avatar.png> </a><span class=logo-prompt>Я на github</span></aside><article><div class=center><h1>Запускаем свой git сервер</h1><time>4 September 2020</time></div><div class=divider></div><blockquote><p>[Тук тук] Мы свидетели линуксовы, не хотели бы вы поговорить про git?</blockquote><p>Короче, сегодня мы из ***** и палок будем запускать гитовый сервер.<p>Приступим же к действию!<p>Сначала нам нужно создать bare версию репозитория, который будем хостить. Предлагаю склонировать какой-нибудь репозиторий с github.<pre class=language-bash data-lang=bash style=color:#111;background-color:#f9f9f9><code class=language-bash data-lang=bash><span style=color:#c82728>$</span><span style=color:#4271ae> mkdir server-folder
</span><span style=color:#c82728>$</span><span style=color:#4271ae> cd </span><span style=color:#c82728>~</span><span style=color:#4271ae>/server-folder
</span><span style=color:#c82728>$</span><span style=color:#4271ae> git clone</span><span style=color:#f07219> --bare</span><span style=color:#4271ae> https://github.com/pinecrew/tini tini.git
</span></code></pre><p>Теперь нужно выполнить команду, которая создаст файл refs в папке info, для того чтобы гит знал что доступно<pre class=language-bash data-lang=bash style=color:#111;background-color:#f9f9f9><code class=language-bash data-lang=bash><span style=color:#c82728>$</span><span style=color:#4271ae> cd </span><span style=color:#c82728>~</span><span style=color:#4271ae>/server-folder/tini.git
</span><span style=color:#c82728>$</span><span style=color:#4271ae> git update-server-info
</span></code></pre><p>И, кстати, при каждом изменений в репозитории эту команду придётся вызывать заново. Или можно активировать post-update хук.<p>Остаётся самая малость, запустить сервер который будет хостить файлы. Для простоты предлагаю запустить питоновский модуль http сервера.<pre class=language-bash data-lang=bash style=color:#111;background-color:#f9f9f9><code class=language-bash data-lang=bash><span style=color:#c82728>$</span><span style=color:#4271ae> cd </span><span style=color:#c82728>~</span><span style=color:#4271ae>/server-folder
</span><span style=color:#c82728>$</span><span style=color:#4271ae> python</span><span style=color:#f07219> -m</span><span style=color:#4271ae> http.server
</span></code></pre><p>И теперь в другом окне терминала можно выполнить<pre class=language-bash data-lang=bash style=color:#111;background-color:#f9f9f9><code class=language-bash data-lang=bash><span style=color:#c82728>$</span><span style=color:#4271ae> git clone http://localhost:8000/tini.git
</span></code></pre><p>Всё, ПРОФИТ!<h1 id=chto-pochitat>Что почитать</h1><ol><li><a href=https://git-scm.com/book/en/v2>Pro Git (v2)</a></ol></article><div class=back><a href=https://freecx.github.io/>Назад</a></div><div class=footer><span>Также читайте <a title="ты сам сломал ссылку, так что ничего личного" href=https://antoniii.github.io/> <s>antoniii</s> </a> <a href=https://citrux.github.io/>citrux</a> <a href=https://sputnikas.github.io/>sputnikas</a> </span></div><script>let msg=` А спонсор статей в моём блоге -- моя лень -- спонсор статей.`;[`=`.repeat(msg.length+ 1),msg,`=`.repeat(msg.length+ 1)].forEach(a=>console.warn(a))</script>